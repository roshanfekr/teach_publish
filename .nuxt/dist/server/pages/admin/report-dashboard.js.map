{"version":3,"file":"pages/admin/report-dashboard.js","sources":["webpack:///./pages/admin/report-dashboard.vue?9f85","webpack:///./pages/admin/report-dashboard.vue","webpack:///./pages/admin/report-dashboard.vue?8867","webpack:///./pages/admin/report-dashboard.vue?c07a"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"w-100\",staticStyle:{\"overflow-x\":\"auto\",\"overflow-y\":\"hidden\"}},[_vm._ssrNode(\"<div class=\\\"m-3 pt-2\\\" data-v-241b0e61>\",\"</div>\",[_c('b-row',[_c('b-col',{attrs:{\"lg\":\"6\"}},[_c('h4',[_vm._v(\"User Requests\")]),_vm._v(\" \"),_c('b-row',{staticClass:\"px-3\"},[_c('b-button-group',{attrs:{\"size\":\"sm\"}},_vm._l((_vm.reqButtons),function(btn,idx){return _c('b-button',{key:idx,attrs:{\"variant\":btn.state ? 'success' : 'secondary'},on:{\"click\":function($event){return _vm.reportRequestTake(btn)}}},[_vm._v(\"\\n                  \"+_vm._s(btn.caption)+\"\\n                \")])}),1)],1),_vm._v(\" \"),_c('client-only',[_c('line-chart',{attrs:{\"chart-options\":_vm.chartOptions,\"chart-data\":_vm.chartData,\"height\":400,\"width\":400,\"chart-id\":\"lineChart\"}})],1)],1),_vm._v(\" \"),_c('b-col',{attrs:{\"lg\":\"6\"}},[_c('h4',[_vm._v(\"User Report\")]),_vm._v(\" \"),_c('b-row',{staticClass:\"px-3\"},[_c('b-button-group',{attrs:{\"size\":\"sm\"}},_vm._l((_vm.userButtons),function(btn,idx){return _c('b-button',{key:idx,attrs:{\"variant\":btn.state ? 'success' : 'secondary'},on:{\"click\":function($event){return _vm.reportUsers(btn)}}},[_vm._v(\"\\n                \"+_vm._s(btn.caption)+\"\\n              \")])}),1)],1),_vm._v(\" \"),_c('client-only',[_c('line-chart',{attrs:{\"chart-options\":_vm.chartOptions,\"chart-data\":_vm.userChartData,\"height\":400,\"width\":400,\"chart-id\":\"lineChart1\"}})],1)],1)],1),_vm._ssrNode(\" \"),_c('b-row',[_c('b-row',{staticClass:\"w-100 mb-1 pl-3 pt-4\",attrs:{\"id\":\"toolbar\"}},[_c('b-col',{attrs:{\"lg\":\"4\"}},[_c('h4',[_vm._v(\"Online Users\")])])],1),_vm._v(\" \"),_c('b-col',{staticClass:\"w-100\"},[_c('div',{staticStyle:{\"min-width\":\"750px\"}},[_c('b-row',{staticClass:\"d-md-flex col-md-12 col-lg-12 m-center  \"},[(this.searchData.rowCount / this.searchData.perPage > 1)?_c('b-pagination',{attrs:{\"total-rows\":this.searchData.rowCount,\"per-page\":this.searchData.perPage},on:{\"change\":_vm.loadData},model:{value:(_vm.searchData.pageIndex),callback:function ($$v) {_vm.$set(_vm.searchData, \"pageIndex\", $$v)},expression:\"searchData.pageIndex\"}}):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"w-100 h-100\",staticStyle:{\"border\":\"1px solid #d8d6d6\"}},[_c('div',{staticClass:\"w-100 px-2 py-1 shadow-sm d-flex border \",staticStyle:{\"background\":\"#d8d6d6\"}},[_c('div',{staticClass:\"px-2  mt-1\",staticStyle:{\"width\":\"100%\",\"min-width\":\"300px\"}},[_vm._v(\"\\n              Email\\n            \")]),_vm._v(\" \"),_c('div',{staticClass:\"px-2 mt-1\",staticStyle:{\"min-width\":\"180px\"}},[_vm._v(\"\\n              Last Online\\n            \")])]),_vm._v(\" \"),(_vm.data.length === 0)?_c('div',{staticClass:\"w-100 text-center py-4\",staticStyle:{\"color\":\"#b4b4b4\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"noRecordFound\"))+\"\\n          \")]):_vm._e(),_vm._v(\" \"),_vm._l((_vm.data),function(item,index){return _c('div',{key:index,staticClass:\"mx-0 w-100 \"},[_c('div',{staticClass:\"w-100 p-2  shadow-sm \"},[_c('div',{staticClass:\"w-100 d-flex\"},[_c('div',{staticClass:\"text-left px-2 \",staticStyle:{\"width\":\"100%\",\"min-width\":\"300px\"}},[_vm._v(\"\\n                  \"+_vm._s(item.email)+\"\\n                \")]),_vm._v(\" \"),_c('div',{staticClass:\"text-left px-2 \",staticStyle:{\"min-width\":\"180px\"}},[_c('span',{staticClass:\"small\"},[_vm._v(_vm._s(_vm._f(\"moment\")(item.updatedAt,\"ddd ,MMM DD, YYYY - hh:mm\")))])])])])])})],2)],1)])],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\nexport default {\n  layout: 'AdminTemplate',\n  name: \"chart-dashboard\",\n\n  data() {\n    return {\n      reqButtons: [\n        { caption: 'Last Month', index : 0, state: false, value: \"month\" },\n        // { caption: 'Weekly', state: false, value: \"weekly\" },\n        { caption: 'Monthly', index : 1, state: false, value: \"monthly\" },\n        { caption: 'Yearly', index : 2, state: true , value: \"yearly\" },\n      ],\n      userButtons: [\n        { caption: 'Last Month', index : 0 , state: false, value: \"month\" },\n        // { caption: 'Weekly', state: false, value: \"weekly\" },\n        { caption: 'Monthly', index : 1 , state: false, value: \"monthly\" },\n        { caption: 'Yearly', index : 2 , state: true , value: \"yearly\" },\n      ],\n      chartData: {\n        labels: [],\n        datasets: [\n          {\n            label: '',\n            backgroundColor: '#f87979',\n            data: []\n          }\n        ]\n      },\n      userChartData: {\n        labels: [],\n        datasets: [\n          {\n            label: 'Data One',\n            backgroundColor: '#f87979',\n            data: []\n          }\n        ]\n      },\n      chartOptions: {\n        responsive: true,\n        maintainAspectRatio: false\n      },\n      data: [],\n      windowWidth: process.browser ? window.getComputedStyle(document.documentElement).getPropertyValue('--screen-mode') : 'sm',\n      busy: true,\n      searchData: {\n        pageIndex: 0,\n        rowCount: 0,\n        perPage: 10,\n      },\n    }\n  },\n  mounted() {\n    this.loadData()\n    this.reportRequestTake(this.reqButtons[0])\n    this.reportUsers(this.userButtons[0])\n  },\n  methods:\n    {\n      loadData(index) {\n        try {\n          this.busy = true\n          this.searchData.pageIndex = index\n          this.$axios.post(\"/user/get-online-user\", this.searchData).then((res) => {\n            this.data = res.data.rows\n            this.searchData.rowCount = res.data.count\n          }).catch((err) => {\n\n          }).finally(() => {\n            this.busy = false\n          })\n\n        } catch (e) {\n          this.busy = false\n        }\n      },\n\n      reportRequestTake(btn) {\n        // user change count\n        // MESSAGE: 0,\n        // REQUEST_FOR_TAKE: 1,\n        // ACCEPTED: 2,\n        // REJECTED: 3,\n        this.activeDateButton(this.reqButtons , btn)\n        let dtype = null\n        if(btn != null)\n          dtype = btn.value\n\n        var data = {dateType: \"month\"} // week\n        if(dtype != null)\n          data.dateType = dtype\n\n        this.$axios.post('/report/report-request-take', data).then((res) => {\n            var result = res.data.result\n            let valuesType1 = []\n            let labels = {}\n            result.forEach(function (item, index) {\n              let val = {type_1: 0, type_2: 0, type_3: 0}\n              if (labels[item[\"d\"]] == null) {\n                labels[item[\"d\"]] = val\n              } else {\n                val = labels[item[\"d\"]]\n              }\n\n              if (item[\"type\"] === 1)\n                val.type_1 = item[\"count\"]\n              if (item[\"type\"] === 2)\n                val.type_2 = item[\"count\"]\n              if (item[\"type\"] === 3)\n                val.type_3 = item[\"count\"]\n\n              labels[item[\"d\"]] = val\n\n            })\n\n            let valType_1 = []\n            let valType_2 = []\n            let valType_3 = []\n            let lbs = []\n\n            for (const key in labels) {\n              let item = labels[key]\n              lbs.push(key)\n              valType_1.push(item.type_1)\n              valType_2.push(item.type_2)\n              valType_3.push(item.type_3)\n            }\n            this.chartData.labels = lbs\n            this.chartData.datasets = [{\n              label: 'Request',\n              backgroundColor: '#f87979',\n              data: valType_1\n            }, {\n              label: 'Accepted Request',\n              backgroundColor: '#00c4ff',\n              data: valType_2\n            }, {\n              label: 'Rejected Request',\n              backgroundColor: '#6ae200',\n              data: valType_3\n            }]\n\n          }\n        ).catch(error => {\n\n          console.log(error)\n        });\n\n\n      }\n      ,\n      activeDateButton(butns , btn)\n      {\n        butns.forEach((item)=>{\n          item.state = false\n        })\n        btn.state = true;\n\n      }\n      ,\n      reportUsers(btn) {\n        let dtype = null\n        var data = {dateType: \"month\" , userType: \"tutor\"} // week\n        if(btn != null)\n          dtype = btn.value\n        if(dtype != null)\n          data.dateType = dtype\n\n        this.activeDateButton(this.userButtons , btn)\n\n        this.$axios.post('/report/report-users', data).then((res) => {\n          var result = res.data.result\n          let labels = {}\n\n          result.forEach(function (item, index)\n          {\n            let val = {type_1: 0, type_2: 0, type_3: 0}\n            if (labels[item[\"year\"]] == null) {\n              labels[item[\"year\"]] = val\n            } else {\n              val = labels[item[\"year\"]]\n            }\n\n            if (item[\"name\"] === \"tutor\")\n              val.type_1 = item[\"count\"]\n            if (item[\"name\"] === \"student\")\n              val.type_2 = item[\"count\"]\n            if (item[\"name\"] === \"guest\")\n              val.type_3 = item[\"count\"]\n            labels[item[\"year\"]] = val\n\n          })\n\n          let valType_1 = []\n          let valType_2 = []\n          let valType_3 = []\n          let lbs = []\n\n          for (const key in labels) {\n            let item = labels[key]\n            lbs.push(key)\n            valType_1.push(item.type_1)\n            valType_2.push(item.type_2)\n            valType_3.push(item.type_3)\n          }\n\n          this.userChartData.labels = lbs\n          this.userChartData.datasets = [{\n            label: 'Tutor',\n            backgroundColor: '#f10a0a',\n            data: valType_1\n          }, {\n            label: 'Student',\n            backgroundColor: '#0074ff',\n            data: valType_2\n          }, {\n              label: 'Guest',\n              backgroundColor: '#39ff00',\n              data: valType_3\n            }]\n\n        }).catch(error => {\n          console.log(error)\n        });\n\n\n      }\n\n    }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./report-dashboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./report-dashboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./report-dashboard.vue?vue&type=template&id=241b0e61&scoped=true&\"\nimport script from \"./report-dashboard.vue?vue&type=script&lang=js&\"\nexport * from \"./report-dashboard.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"241b0e61\",\n  \"35b4476a\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAHA;AAUA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAHA;AAUA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAxCA;AA8CA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAGA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAHA;AAMA;AAGA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAGA;AAEA;AACA;AACA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAGA;AACA;AAzKA;AA1DA;;ACjHA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}