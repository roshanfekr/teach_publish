{"version":3,"file":"pages/admin/reviews.js","sources":["webpack:///./pages/admin/reviews.vue?4d32","webpack:///./pages/admin/reviews.vue","webpack:///./pages/admin/reviews.vue?d571","webpack:///./pages/admin/reviews.vue?4db3"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',[_c('b-row',{staticClass:\"d-md-flex col-md-12 col-lg-12 m-center w-100 \",attrs:{\"id\":\"toolbar\"}},[_c('b-col',[_c('b-card',{staticClass:\"pb-3 mb-1 w-100\",attrs:{\"no-body\":\"\"}},[_c('b-card-header',{attrs:{\"header-tag\":\"header\",\"role\":\"tab\"}}),_vm._v(\" \"),_c('div',{staticClass:\"mt-4\"},[_c('b-row',{staticClass:\"mt-2\"},[_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"4\",\"label-cols-lg\":\"2\",\"label-size\":\"sm\",\"label-align-sm\":\"right\",\"label\":_vm.$t('lesson'),\"label-for\":\"input-lesson\"}},[_c('v-select',{staticClass:\"m-v-select2 w-75\",attrs:{\"placeholder\":\"Select one subject\",\"reduce\":function (x) { return x.id; },\"options\":_vm.subjectOptions,\"label\":\"subject\",\"selectable\":function (option) { return !option.hasOwnProperty('group'); }},scopedSlots:_vm._u([{key:\"option\",fn:function(ref){\nvar group = ref.group;\nvar subject = ref.subject;\nreturn [(group)?_c('div',{staticClass:\"group\"},[_vm._v(\"\\n                        \"+_vm._s(group)+\"\\n                      \")]):_vm._e(),_vm._v(\"\\n                      \"+_vm._s(subject)+\"\\n                    \")]}}]),model:{value:(_vm.searchData.lessonId),callback:function ($$v) {_vm.$set(_vm.searchData, \"lessonId\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchData.lessonId\"}})],1)],1),_vm._v(\" \"),_c('b-col',[_c('b-form-group',{staticClass:\"w-75\",attrs:{\"label-cols\":\"4\",\"label-cols-lg\":\"2\",\"label-align-sm\":\"right\",\"label-size\":\"sm\",\"label\":_vm.$t('Status'),\"label-for\":\"input-acceptStatus\"}},[_c('b-form-select',{staticClass:\"pt-2  w-75\",attrs:{\"id\":\"input-acceptStatus\",\"options\":_vm.active_options},model:{value:(_vm.searchData.acceptStatus),callback:function ($$v) {_vm.$set(_vm.searchData, \"acceptStatus\", $$v)},expression:\"searchData.acceptStatus\"}})],1)],1)],1),_vm._v(\" \"),_c('b-row',{staticClass:\"mt-2\"},[_c('b-col',[_c('b-form-group',{attrs:{\"label-cols\":\"4\",\"label-cols-lg\":\"2\",\"label-size\":\"sm\",\"label-align-sm\":\"right\",\"label\":_vm.$t('tutorName'),\"label-for\":\"input-tutorName\"}},[_c('b-form-input',{staticClass:\"pt-2  w-75\",attrs:{\"id\":\"input-tutorName\"},model:{value:(_vm.searchData.tutorName),callback:function ($$v) {_vm.$set(_vm.searchData, \"tutorName\", $$v)},expression:\"searchData.tutorName\"}})],1)],1),_vm._v(\" \"),_c('b-col',[_c('b-form-group',{staticClass:\"w-75\",attrs:{\"label-cols\":\"4\",\"label-align-sm\":\"right\",\"label-size\":\"sm\",\"label\":_vm.$t('tutorLname'),\"label-for\":\"input-tutorLname\"}},[_c('b-form-input',{staticClass:\"pt-2 \",attrs:{\"id\":\"input-tutorLname\"},model:{value:(_vm.searchData.tutorLname),callback:function ($$v) {_vm.$set(_vm.searchData, \"tutorLname\", $$v)},expression:\"searchData.tutorLname\"}})],1)],1)],1),_vm._v(\" \"),_c('b-row',{staticClass:\"mt-2\"},[_c('b-button',{staticClass:\"m-center w-25\",attrs:{\"variant\":\"primary\"},on:{\"click\":this.search}},[_vm._v(\"Search\")])],1)],1)],1)],1)],1),_vm._v(\" \"),_c('b-row',{staticClass:\"d-md-flex col-md-12 col-lg-12 m-center mt-1\"},[_c('b-overlay',{attrs:{\"show\":_vm.overlay_show,\"variant\":\"white\",\"no-wrap\":\"\"}}),_vm._v(\" \"),_c('b-row',{staticClass:\"d-md-flex col-md-12 col-lg-12 m-center mt-3\"},[_c('b-col',[_c('b-pagination',{attrs:{\"total-rows\":this.searchData.rowCount,\"per-page\":this.searchData.perPage,\"first-text\":\"First\",\"prev-text\":\"Prev\",\"next-text\":\"Next\",\"last-text\":\"Last\"},on:{\"change\":_vm.search},model:{value:(_vm.pageIndex),callback:function ($$v) {_vm.pageIndex=$$v},expression:\"pageIndex\"}})],1)],1),_vm._v(\" \"),_c('b-row',{staticClass:\"d-md-flex col-md-12 col-lg-12 m-center mt-1\"},[_c('b-col',[_c('b-table',{attrs:{\"head-variant\":\"light\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.t_items,\"fields\":_vm.t_fields},scopedSlots:_vm._u([{key:\"cell(acceptStatus)\",fn:function(row){return [(row.item.acceptStatus === 0)?_c('b-badge',{attrs:{\"variant\":\"warning\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"Pending\")))]):_vm._e(),_vm._v(\" \"),(row.item.acceptStatus === 1)?_c('b-badge',{attrs:{\"variant\":\"success\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"Accepted\")))]):_vm._e(),_vm._v(\" \"),(row.item.acceptStatus === 2)?_c('b-badge',{attrs:{\"variant\":\"danger\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"Rejected\")))]):_vm._e()]}},{key:\"cell(show_details)\",fn:function(row){return [_c('b-button',{staticClass:\"mr-2\",attrs:{\"size\":\"sm\"},on:{\"click\":row.toggleDetails}},[_vm._v(\"\\n                \"+_vm._s(row.detailsShowing ? 'Hide' : 'Show')+\" Comment\\n              \")])]}},{key:\"cell(verify_action)\",fn:function(row){return [_c('b-button',{ref:'btnEdit' + row.index,attrs:{\"variant\":\"info\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.verify(row)}}},[_vm._v(\"Verify\")])]}},{key:\"cell(reject_action)\",fn:function(row){return [_c('b-button',{ref:'btnEdit' + row.index,attrs:{\"variant\":\"info\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.reject(row)}}},[_vm._v(\"Reject\")])]}},{key:\"row-details\",fn:function(row){return [_c('b-card',[_c('b-row',{staticClass:\"mb-2\"},[_c('b-col',{staticClass:\"text-sm-right\",attrs:{\"sm\":\"3\"}},[_c('b',[_vm._v(\"Comment:\")])]),_vm._v(\" \"),_c('b-col',[_vm._v(_vm._s(row.item.comment))])],1)],1)]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {required} from \"vuelidate/lib/validators\";\n\nexport default {\n  layout: 'AdminTemplate',\n  name: \"users\"\n  ,\n  data() {\n    return {\n      subjectOptions : [],\n      selected: null,\n      // options: ['list', 'of', 'options'],\n      header_title: '',\n      overlay_show: false ,\n      tabVisible: 0,\n      pageIndex: 1,\n      active_options:[\n        { value: 0, text: this.$t('pending') },\n        { value: 1, text: this.$t('accept') },\n        { value: 2, text: this.$t('reject') },\n        { value: -1, text: this.$t('all') },\n      ],\n\n      searchData: {\n        pageIndex: 0,\n        rowCount: 0,\n        perPage: 10,\n        id: 0,\n        lessonId: 0,\n        acceptStatus : 0 , // 0=unverified , 1= verified , 2= rejected\n        tutorId: 0 ,\n        tutorName: null ,\n        tutorLname: null\n      },\n      t_fields:[\n        {\n          key: 'tutor.name',\n          label: 'Tutor Name',\n          sortable: true\n        },\n        {\n          key: 'tutor.lastname',\n          label: 'Tutor LName',\n          sortable: true,\n        },\n        {\n          key: 'acceptStatus',\n          label: 'Status',\n          sortable: false,\n        },\n        // {\n        //   key: 'comment',\n        //   label: 'Comment',\n        //   sortable: false,\n        // },\n        {\n          key: 'show_details',\n          label: 'Comment',\n          sortable: false\n        },\n        {\n          key: 'verify_action',\n          label: 'Action',\n          sortable: false\n        },\n        {\n          key: 'reject_action',\n          label: 'Action',\n          sortable: false\n        },\n      ],\n      t_items: []\n    }\n  }\n  ,\n  mounted()\n  {\n    this.loadSubjects()\n    this.search()\n  },\n\n  validations: {\n    nData:{\n      subject:{\n        required,\n      }\n    },\n\n  },\n\n\n  methods:\n  {\n    verify(row){\n      try{\n        let item = row.item\n        let data = {id: item.id ,  acceptStatus: 1}\n        this.$axios.post('/review/changeAcceptStatus', data).then((res) => {\n          if(res.data )\n            this.makeToast(\"success\" , \"Success\" , this.$t(\"verified_msg\") )\n          else\n            this.makeToast(\"danger\" , \"Failed\" , \"verify_failed_msg\" )\n        }).catch(error => {\n          this.overlay_show = false;\n          this.makeToast(\"danger\" , \"Error\" , \"verify_failed_msg\" )\n          console.log(error)\n        });\n      }catch (e) {\n\n      }\n    },\n    reject(row){\n      try{\n        let item = row.item\n        let data = {id: item.id ,  acceptStatus: 2}\n        this.$axios.post('/review/changeAcceptStatus', data).then((res) => {\n          if(res.data)\n            this.makeToast(\"success\" , \"Success\" , this.$t(\"reject_msg\") )\n          else\n            this.makeToast(\"danger\" , \"Failed\" , \"reject_failed_msg\" )\n        }).catch(error => {\n          this.overlay_show = false;\n          this.makeToast(\"danger\" , \"Error\" , \"reject_failed_msg\" )\n          console.log(error)\n        });\n      }catch (e) {\n\n      }\n    },\n    loadSubjects() {\n      this.$axios.post('/definitions/getAllLessons').then((res) => {\n        this.subjectOptions = res.data;\n      }).catch(error => {\n        if (error.response.data.errors) {\n          this.errors = error.response.data.errors\n        }\n      })\n    },\n    makeToast(variant = 'success', header = 'Message', msg = '')\n    {\n      this.$bvToast.toast(this.$t(msg), {\n          title: header,\n          variant: variant,\n          solid: true\n        })\n     },\n\n    search(index)\n    {\n      if(index > 0)\n        this.searchData.pageIndex = index\n      else\n        this.searchData.pageIndex = 0\n\n      this.overlay_show = true;\n      this.$axios.post('/review/getReviewSearch', this.searchData).then((res) => {\n        this.t_items = res.data.rows\n        // for (let i = 0; i < res.data.rows; i++) {\n        //   let row = res.data.rows[]\n        // }\n        this.searchData.rowCount = res.data.row_count\n        this.overlay_show = false;\n      }).catch(error => {\n        this.overlay_show = false;\n        this.makeToast(\"danger\" , \"Error\" , \"search_error\" )\n        console.log(error)\n      });\n    }\n\n\n\n\n  }\n\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reviews.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./reviews.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./reviews.vue?vue&type=template&id=9bae9300&scoped=true&\"\nimport script from \"./reviews.vue?vue&type=script&lang=js&\"\nexport * from \"./reviews.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"9bae9300\",\n  \"74da7b88\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AATA;AAWA;AAEA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAHA;AAMA;AA/DA;AAiEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AADA;AADA;AAUA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAEA;AAKA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5EA;AAzFA;;AChIA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}