(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{605:function(t,e,o){"use strict";o.r(e);o(19);var n=o(30),l=o(37);n.c.add(l.t);var c={name:"system-msg",data:function(){return{notifDetail:null,Rows:[],windowWidth:window.getComputedStyle(document.documentElement).getPropertyValue("--screen-mode"),selectedNotification:null,notifications:[],loadingNotificationSelect:!0,loadingNotification:!1}},mounted:function(){var t=this;this.loadingNotification=!0,this.getNotifications(),this.userId=this.$auth.user.id,this.$nextTick((function(){window.addEventListener("resize",t.onResize)}))},methods:{onResize:function(){this.windowWidth=window.getComputedStyle(document.documentElement).getPropertyValue("--screen-mode")},backButton:function(){this.selectedNotification=null},selectUser:function(t,e){this.loadingNotificationSelect=!0,this.getNotificationDetail(t,e)},getNotifications:function(){var t=this;try{this.$axios.post("/notification/get-all",null).then((function(e){t.notifications=e.data.rows,t.loadingNotification=!1,console.log(e.data)})).catch((function(t){}))}catch(t){console.log(t)}},getNotificationDetail:function(t,e){var o=this,n={Id:t.id};this.$axios.post("/notification/get-notification-detail",n).then((function(t){o.loadingNotificationSelect=!1,o.notifications[e]=t.data.data,o.notifDetail=t.data.data,o.selectedNotification=t.data.data})).catch((function(t){o.loadingNotificationSelect=!1})).finally((function(){o.loadingNotificationSelect=!1}))}},beforeDestroy:function(){clearInterval(this.intervalX),window.removeEventListener("resize",this.onResize)}},d=o(73),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("b-container",{staticClass:"h-100",attrs:{fluid:""}},[o("div",{staticClass:"w-100 h-100 d-flex"},[o("b-row",{directives:[{name:"show",rawName:"v-show",value:null===t.selectedNotification,expression:"(selectedNotification === null)"}],staticClass:"m-0",class:("xl"===t.windowWidth||t.windowWidth,"w-100")},[o("b-overlay",{staticClass:"w-100",attrs:{show:t.loadingNotification,variant:"transparent",opacity:.8,blur:"3px",rounded:"sm"}},[o("div",{staticClass:"mt-2",style:"xl"===t.windowWidth||"lg"===t.windowWidth?" min-width: 400px;":"min-width: 100%; "},t._l(t.notifications,(function(e,n){return o("div",{key:n,staticClass:"mt-1 w-100  ",staticStyle:{height:"50px"},on:{click:function(o){return t.selectUser(e,n)}}},[o("div",{staticClass:"w-100 p-2 mt-0 shadow-sm d-flex e rounded-lg",staticStyle:{cursor:"pointer"},style:!0===t.Rows[n]?"background-color: rgba(144,169,244,0.32)":""},[o("div",{staticClass:"pl-3 w-100"},[o("span",{staticClass:"font-weight-bold"},[t._v(" "+t._s(e.Notification.title))]),t._v(" "),o("span",{staticClass:"float-right small"},[t._v(t._s(t._f("moment")(e.Notification.updatedAt,"MMM Do YYYY, h:mm:ss a")))]),t._v(" "),o("div",{staticClass:"w-100 three-dot-one-line"},[0===e.view||!1===e.view||null===e.view?o("b-badge",{attrs:{variant:"success"}},[t._v("Unread")]):t._e()],1)])])])})),0)])],1),t._v(" "),null!==t.selectedNotification?o("div",{staticClass:"w-100 shadow h-100 mt-2 ml-3 p-1 rounded-bottom",staticStyle:{"border-radius":"20px"}},[o("div",{staticClass:" rounded-bottom",staticStyle:{"background-color":"#fad2dc","border-radius":"20px"}},[o("div",{staticClass:"d-flex"},[o("div",[o("b-button",{staticClass:"btn-crl-mini btn-primary ",on:{click:t.backButton}},[t._v("Back")])],1),t._v(" "),o("div",{staticClass:"pl-2 w-100 mt-1 "},[o("span",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.selectedNotification.Notification.title))])])]),t._v(" "),o("div",{staticClass:"small mb-n1 ml-5"},[o("span",[t._v(" "+t._s(t._f("moment")(null!=t.selectedNotification.Notification.createdAt?t.selectedNotification.Notification.createdAt:"","MMM Do YYYY, h:mm:ss a"))+" ")])])]),t._v(" "),o("div",{staticClass:"h-100"},[o("div",{staticClass:"d-flex"},[o("b-link",{directives:[{name:"show",rawName:"v-show",value:"xl"!==t.windowWidth&&"lg"!==t.windowWidth,expression:"windowWidth !== 'xl' && windowWidth !== 'lg'"}],staticClass:"float-right",on:{click:function(e){t.selectedNotification=null}}},[o("svg",{staticClass:"bi-arrow90deg-left mx-auto b-icon bi",attrs:{"data-v-41be6633":"",viewBox:"0 0 16 16",width:"1em",height:"1em",focusable:"false",role:"img","aria-label":"arrow90deg left",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor"}},[o("g",{attrs:{"data-v-41be6633":""}},[o("path",{attrs:{"fill-rule":"evenodd",d:"M1.146 4.854a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H12.5A2.5 2.5 0 0 1 15 6.5v8a.5.5 0 0 1-1 0v-8A1.5 1.5 0 0 0 12.5 5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4z"}})])])])],1),t._v(" "),o("div",{staticClass:"h-100 mt-2",staticStyle:{"max-height":"400px",overflow:"auto"},attrs:{id:"chatBox"}},[o("span",{staticClass:"p-3",staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.selectedNotification.Notification.text))])])])]):t._e()],1)])}),[],!1,null,"624f71db",null);e.default=component.exports}}]);