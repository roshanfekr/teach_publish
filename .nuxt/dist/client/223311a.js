(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{524:function(t,e,r){var content=r(627);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(70).default)("3a926eab",content,!0,{sourceMap:!1})},624:function(t,e){},626:function(t,e,r){"use strict";r(524)},627:function(t,e,r){var n=r(69),l=r(628),o=n(!1);o.i(l),o.push([t.i,"\n.social-media .social-icon[data-v-190cf49c] {\r\n  display: block;\r\n  width: 40px;\r\n  height: 40px;\r\n  background: transparent;\r\n  color: white;\r\n  border: 1px solid rgba(255, 255, 255, 1);\r\n  font-size: 16px;\r\n  margin-right: 5px;\r\n  border-radius: 50%;\n}\n.social-media .social-icon[data-v-190cf49c]:hover, .social-media .social-icon[data-v-190cf49c]:focus {\r\n  background: #fff;\r\n  color: var(--color2);\n}\r\n\r\n",""]),t.exports=o},628:function(t,e,r){var n=r(69)(!1);n.push([t.i,"/*@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap');*/\n.adiv {\r\n  background: #04CB28;\r\n  border-radius: 15px;\r\n  border-bottom-right-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n  font-size: 16px;\r\n  height: 46px\n}\n.chat {\r\n  border: none;\r\n  background: #E2FFE8;\r\n  font-size: 16px;\r\n  border-radius: 20px\n}\n.bg-white {\r\n  border: 1px solid #E7E7E9;\r\n  font-size: 16px;\r\n  border-radius: 20px;\n}\n.myvideo img {\r\n  border-radius: 20px\n}\n.dot {\r\n  font-weight: bold\n}\r\n/* Chat containers */\r\n/*.container {*/\r\n/*  border: 2px solid #dedede;*/\r\n/*  background-color: #f1f1f1;*/\r\n/*  border-radius: 5px;*/\r\n/*  padding: 10px;*/\r\n/*  margin: 10px 0;*/\r\n/*}*/\r\n\r\n/*!* Darker chat container *!*/\r\n/*.darker {*/\r\n/*  border-color: #ccc;*/\r\n/*  background-color: #ddd;*/\r\n/*}*/\r\n\r\n/*!* Clear floats *!*/\r\n/*.container::after {*/\r\n/*  content: \"\";*/\r\n/*  clear: both;*/\r\n/*  display: table;*/\r\n/*}*/\r\n\r\n/*!* Style images *!*/\r\n/*.container img {*/\r\n/*  float: left;*/\r\n/*  max-width: 60px;*/\r\n/*  width: 100%;*/\r\n/*  margin-right: 20px;*/\r\n/*  border-radius: 50%;*/\r\n/*}*/\r\n\r\n/* Style the right image */\n.right {\r\n  float: right;\r\n  margin-left: 20px;\r\n  margin-right:0;\n}\r\n\r\n/* Style time text */\n.time-right {\r\n  float: right;\r\n  color: #aaa;\n}\r\n\r\n/* Style time text */\n.time-left {\r\n  float: left;\r\n  color: #999;\n}\r\n\r\n\r\n",""]),t.exports=n},695:function(t,e,r){"use strict";r.r(e);r(2),r(1),r(43),r(610);var n=r(37),l=r(170),o=r(81);n.c.add(o.i),n.c.add(l.b);var c={name:"Index",data:function(){return{value:"Some value",busy:!1,timeout:null,userId:0,msgTextBox:"",currentChatRoom:null,showChatMessagesOverlay:!1,messagesHtml:[],visibleMain:!0,visibleProgress:!1,intervalX:null,filter:null,filterOn:[],fields:[{key:"viewName",label:"Name",sortable:!0,thStyle:{width:"25%"}},{key:"text",label:"Message",sortable:!0,thStyle:{width:"50%"}},{key:"updatedAt",label:"Date",sortable:!0,thStyle:{width:"25%"}}],request_rows:[]}},mounted:function(){this.showRequests(),this.intervalX=setInterval(this.refreshTimer,2e4),this.userId=this.$auth.user.id},methods:{rowClass:function(t,e){if(t&&"row"===e){var r="";return t.unread>0&&(r="font-weight-bold font-italic w-100"),"mt-7 "+r}},showRequests:function(){var t=this;try{if(!this.visibleMain)return;this.visibleProgress=!0,this.$axios.post("request/getRequests",null).then((function(e){t.visibleProgress=!1,t.request_rows=e.data.data})).catch((function(e){t.visibleProgress=!1}))}catch(t){console.log(t),this.visibleProgress=!1}},onclick:function(t,e){var r=this;try{var n=this.$auth.user.id;n=n===t.receiverId?t.senderId:t.receiverId,this.visibleProgress=!1,this.showChatMessagesOverlay=!0;var l={sUid:n};this.currentChatRoom=t,this.$axios.post("request/getUserRequests",l).then((function(e){e.data.data.length>0&&(r.messagesHtml=e.data.data),r.visibleMain=!1,r.showChatMessagesOverlay=!1,r.$axios.post("/request/setview",l).then((function(e){t.viewed=1})).catch((function(t){}))})).catch((function(t){r.showChatMessagesOverlay=!1,r.visibleMain=!0}))}catch(t){this.showChatMessagesOverlay=!1}},sendMessage:function(){var t=this;try{if(0===this.msgTextBox.length)return;var e={receiverId:this.currentChatRoom.receiverId===this.userId?this.currentChatRoom.senderId:this.currentChatRoom.receiverId,text:this.msgTextBox,type:0,entityId:0},n={container:"#chatbox",easing:"ease-in",lazy:!1,offset:-60,force:!0,cancelable:!0,onStart:function(element){},onDone:function(element){},onCancel:function(){},x:!1,y:!0};this.$axios.post("/request/create",e).then((function(e){if(!0===e.data.ok){t.msgTextBox="",t.messagesHtml.push(e.data.data);var element="#msg_"+(e.data.data.id-1);r(205).scrollTo(element,100,n)}})).catch((function(t){console.log(t)}))}catch(t){}},chatMessages:function(){},cDate:function(t){return t.toLocaleString()},back:function(){this.visibleMain=!0,this.visibleProgress=!0},refreshTimer:function(){console.log("----hi------"),this.visibleMain&&this.showRequests()}},beforeDestroy:function(){console.log("----bye------"),clearInterval(this.intervalX)}},d=(r(626),r(80)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("b-container",{attrs:{fluid:""}},[t.visibleMain?e("div",[e("div",{staticStyle:{height:"15px"}},[t.visibleProgress?e("b-spinner",{attrs:{small:"",label:"Small Spinner",type:"grow"}}):t._e()],1),t._v(" "),e("b-row",[e("b-col",{staticClass:"my-1",attrs:{lg:"4"}},[e("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[e("b-input-group",{attrs:{size:"sm"}},[e("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),e("b-input-group-append",[e("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),t._v(" "),e("b-col",{staticClass:"my-1",attrs:{lg:"4"}},[e("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter On",description:"Leave all unchecked to filter on all data","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"},scopedSlots:t._u([{key:"default",fn:function(r){var n=r.ariaDescribedby;return[e("b-form-checkbox-group",{staticClass:"mt-1",attrs:{"aria-describedby":n},model:{value:t.filterOn,callback:function(e){t.filterOn=e},expression:"filterOn"}},[e("b-form-checkbox",{attrs:{value:"viewName"}},[t._v("Name")]),t._v(" "),e("b-form-checkbox",{attrs:{value:"text"}},[t._v("Message")])],1)]}}],null,!1,3375923224)})],1)],1),t._v(" "),e("b-overlay",{attrs:{id:"overlay-background",show:t.showChatMessagesOverlay,variant:"white",opacity:.81,rounded:"sm"}},[e("b-table",{staticClass:"mt-3",attrs:{hover:"",fields:t.fields,filter:t.filter,items:t.request_rows,"filter-included-fields":t.filterOn,"show-empty":"","tbody-tr-class":t.rowClass},on:{"row-clicked":t.onclick},scopedSlots:t._u([{key:"cell(viewName)",fn:function(r){return[e("b-avatar",{attrs:{size:"3rem",src:null!=r.item.image_ru?"/"+r.item.image_ru:"",alt:"Cropped Image"}}),t._v(" "),e("span",[t._v(" "+t._s(r.item.viewName+" "+r.item.viewLname))])]}},{key:"cell(test)",fn:function(r){return[e("span",[t._v(t._s(r.item.text+" ")+" "),r.item.unread>0?e("b-badge",{attrs:{variant:"success"}},[t._v(t._s(r.item.unread))]):t._e()],1)]}},{key:"cell(updatedAt)",fn:function(r){return[e("i",[t._v(t._s(t.cDate(r.item.updatedAt)))])]}}],null,!1,933988337)})],1)],1):t._e(),t._v(" "),t.visibleMain?t._e():e("div",{staticClass:"w-100 h-100"},[e("b-button",{staticClass:"mt-2 mb-2",attrs:{variant:"light"},on:{click:t.back}},[e("svg",{staticClass:"bi bi-arrow-left-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"}})])]),t._v(" "),e("div",{staticClass:"card",staticStyle:{"min-height":"400px"}},[e("div",{staticStyle:{"max-height":"400px","overflow-y":"auto"},attrs:{id:"chatbox"}},t._l(t.messagesHtml,(function(r){return e("div",[r.receiverId===t.userId&&0===r.type?e("div",{staticClass:"d-flex flex-row p-3 w-100",attrs:{id:"msg_"+r.id}},[e("b-avatar",{attrs:{size:"3rem",src:null!=t.currentChatRoom.image_ru?"/"+t.currentChatRoom.image_ru:"",alt:"Cropped Image"}}),t._v(" "),e("span",{staticClass:"chat ml-2 p-3",staticStyle:{"white-space":"pre"}},[t._v(" "+t._s(r.text)+"\n\n                    "),e("span",{staticClass:"time-right"},[t._v(t._s(null!=r.createdAt?r.createdAt:""))])])],1):t._e(),t._v(" "),r.receiverId!==t.userId&&0===r.type?e("div",{staticClass:"d-flex flex-row p-3 w-100 float-right",attrs:{id:"msg_"+r.id}},[e("div",{staticClass:"bg-white mr-2 p-3 w-100 text-right"},[e("span",{staticClass:"text-muted",staticStyle:{"white-space":"pre"}},[t._v(" "+t._s(r.text)+" ")]),t._v(" "),e("span",{staticClass:"time-left"},[t._v(t._s(null!=r.createdAt?r.createdAt:"")+"\n                    "),0===r.viewed||null===r.viewed?e("svg",{staticClass:"bi bi-check",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"}})]):t._e(),t._v(" "),!0===r.viewed?e("svg",{staticClass:"bi bi-check-all",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z"}})]):t._e()])]),t._v(" "),e("b-avatar",{staticClass:"right",attrs:{size:"3rem",src:null!=t.currentChatRoom.image_su?"/"+t.currentChatRoom.image_su:"",alt:"Cropped Image"}})],1):t._e(),t._v(" "),r.receiverId!==t.userId&&1===r.type?e("div",{staticClass:"d-flex flex-row p-3 w-100 float-right",attrs:{id:"msg_"+r.id}},[e("div",{staticClass:"bg-white mr-2 p-3 w-100 text-right"},[e("span",{staticClass:"text-muted",staticStyle:{"white-space":"pre"}},[t._v(" "+t._s(r.text)+" ")]),t._v(" "),e("span",{staticClass:"time-left"},[t._v(t._s(null!=r.createdAt?r.createdAt:"")+"\n                    "),0===r.viewed||null===r.viewed?e("svg",{staticClass:"bi bi-check",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"}})]):t._e(),t._v(" "),!0===r.viewed?e("svg",{staticClass:"bi bi-check-all",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[e("path",{attrs:{d:"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z"}})]):t._e()])]),t._v(" "),e("b-avatar",{staticClass:"right",attrs:{size:"3rem",src:null!=t.currentChatRoom.image_su?"/"+t.currentChatRoom.image_su:"",alt:"Cropped Image"}})],1):t._e()])})),0)]),t._v(" "),e("div",{staticClass:"p-3",staticStyle:{width:"100%"}},[e("b-overlay",{attrs:{show:t.busy,rounded:"lg",opacity:"0.6"},scopedSlots:t._u([{key:"overlay",fn:function(){return[e("div",{staticClass:"d-flex align-items-center"},[e("b-spinner",{attrs:{small:"",type:"grow",variant:"secondary"}}),t._v(" "),e("b-spinner",{attrs:{type:"grow",variant:"dark"}}),t._v(" "),e("b-spinner",{attrs:{small:"",type:"grow",variant:"secondary"}}),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("Please wait...")])],1)]},proxy:!0}],null,!1,1445552771)},[t._v(" "),e("b-input-group",{attrs:{size:"lg"}},[e("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter Message...",rows:"3","max-rows":"6"},model:{value:t.msgTextBox,callback:function(e){t.msgTextBox=e},expression:"msgTextBox"}}),t._v(" "),e("b-input-group-append",[e("b-button",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#msg_8",expression:"'#msg_8'"}],ref:"button",attrs:{disabled:t.busy,variant:"primary"},on:{click:t.sendMessage}},[t._v("\n              Send\n            ")])],1)],1)],1)],1)],1)])}),[],!1,null,"190cf49c",null);e.default=component.exports}}]);