(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{708:function(t,e,n){"use strict";n.r(e);n(1),n(3),n(24);var o={layout:"AdminTemplate",name:"chart-dashboard",data:function(){return{reqButtons:[{caption:"Last Month",index:0,state:!1,value:"month"},{caption:"Monthly",index:1,state:!1,value:"monthly"},{caption:"Yearly",index:2,state:!0,value:"yearly"}],userButtons:[{caption:"Last Month",index:0,state:!1,value:"month"},{caption:"Monthly",index:1,state:!1,value:"monthly"},{caption:"Yearly",index:2,state:!0,value:"yearly"}],chartData:{labels:[],datasets:[{label:"",backgroundColor:"#f87979",data:[]}]},userChartData:{labels:[],datasets:[{label:"Data One",backgroundColor:"#f87979",data:[]}]},chartOptions:{responsive:!0,maintainAspectRatio:!1},data:[],windowWidth:window.getComputedStyle(document.documentElement).getPropertyValue("--screen-mode"),busy:!0,searchData:{pageIndex:0,rowCount:0,perPage:10}}},mounted:function(){this.loadData(),this.reportRequestTake(this.reqButtons[0]),this.reportUsers(this.userButtons[0])},methods:{loadData:function(t){var e=this;try{this.busy=!0,this.searchData.pageIndex=t,this.$axios.post("/user/get-online-user",this.searchData).then((function(t){e.data=t.data.rows,e.searchData.rowCount=t.data.count})).catch((function(t){})).finally((function(){e.busy=!1}))}catch(t){this.busy=!1}},reportRequestTake:function(t){var e=this;this.activeDateButton(this.reqButtons,t);var n=null;null!=t&&(n=t.value);var data={dateType:"month"};null!=n&&(data.dateType=n),this.$axios.post("/report/report-request-take",data).then((function(t){var n=t.data.result,o={};n.forEach((function(t,e){var n={type_1:0,type_2:0,type_3:0};null==o[t.d]?o[t.d]=n:n=o[t.d],1===t.type&&(n.type_1=t.count),2===t.type&&(n.type_2=t.count),3===t.type&&(n.type_3=t.count),o[t.d]=n}));var r=[],l=[],c=[],d=[];for(var h in o){var v=o[h];d.push(h),r.push(v.type_1),l.push(v.type_2),c.push(v.type_3)}e.chartData.labels=d,e.chartData.datasets=[{label:"Request",backgroundColor:"#f87979",data:r},{label:"Accepted Request",backgroundColor:"#00c4ff",data:l},{label:"Rejected Request",backgroundColor:"#6ae200",data:c}]})).catch((function(t){console.log(t)}))},activeDateButton:function(t,e){t.forEach((function(t){t.state=!1})),e.state=!0},reportUsers:function(t){var e=this,n=null,data={dateType:"month",userType:"tutor"};null!=t&&(n=t.value),null!=n&&(data.dateType=n),this.activeDateButton(this.userButtons,t),this.$axios.post("/report/report-users",data).then((function(t){var n=t.data.result,o={};n.forEach((function(t,e){var n={type_1:0,type_2:0,type_3:0};null==o[t.year]?o[t.year]=n:n=o[t.year],"tutor"===t.name&&(n.type_1=t.count),"student"===t.name&&(n.type_2=t.count),"guest"===t.name&&(n.type_3=t.count),o[t.year]=n}));var r=[],l=[],c=[],d=[];for(var h in o){var v=o[h];d.push(h),r.push(v.type_1),l.push(v.type_2),c.push(v.type_3)}e.userChartData.labels=d,e.userChartData.datasets=[{label:"Tutor",backgroundColor:"#f10a0a",data:r},{label:"Student",backgroundColor:"#0074ff",data:l},{label:"Guest",backgroundColor:"#39ff00",data:c}]})).catch((function(t){console.log(t)}))}}},r=n(80),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-100",staticStyle:{"overflow-x":"auto","overflow-y":"hidden"}},[e("div",{staticClass:"m-3 pt-2"},[e("b-row",[e("b-col",{attrs:{lg:"6"}},[e("h4",[t._v("User Requests")]),t._v(" "),e("b-row",{staticClass:"px-3"},[e("b-button-group",{attrs:{size:"sm"}},t._l(t.reqButtons,(function(n,o){return e("b-button",{key:o,attrs:{variant:n.state?"success":"secondary"},on:{click:function(e){return t.reportRequestTake(n)}}},[t._v("\n                  "+t._s(n.caption)+"\n                ")])})),1)],1),t._v(" "),e("client-only",[e("line-chart",{attrs:{"chart-options":t.chartOptions,"chart-data":t.chartData,height:400,width:400,"chart-id":"lineChart"}})],1)],1),t._v(" "),e("b-col",{attrs:{lg:"6"}},[e("h4",[t._v("User Report")]),t._v(" "),e("b-row",{staticClass:"px-3"},[e("b-button-group",{attrs:{size:"sm"}},t._l(t.userButtons,(function(n,o){return e("b-button",{key:o,attrs:{variant:n.state?"success":"secondary"},on:{click:function(e){return t.reportUsers(n)}}},[t._v("\n                "+t._s(n.caption)+"\n              ")])})),1)],1),t._v(" "),e("client-only",[e("line-chart",{attrs:{"chart-options":t.chartOptions,"chart-data":t.userChartData,height:400,width:400,"chart-id":"lineChart1"}})],1)],1)],1),t._v(" "),e("b-row",[e("b-row",{staticClass:"w-100 mb-1 pl-3 pt-4",attrs:{id:"toolbar"}},[e("b-col",{attrs:{lg:"4"}},[e("h4",[t._v("Online Users")])])],1),t._v(" "),e("b-col",{staticClass:"w-100"},[e("div",{staticStyle:{"min-width":"750px"}},[e("b-row",{staticClass:"d-md-flex col-md-12 col-lg-12 m-center"},[this.searchData.rowCount/this.searchData.perPage>1?e("b-pagination",{attrs:{"total-rows":this.searchData.rowCount,"per-page":this.searchData.perPage},on:{change:t.loadData},model:{value:t.searchData.pageIndex,callback:function(e){t.$set(t.searchData,"pageIndex",e)},expression:"searchData.pageIndex"}}):t._e()],1),t._v(" "),e("div",{staticClass:"w-100 h-100",staticStyle:{border:"1px solid #d8d6d6"}},[e("div",{staticClass:"w-100 px-2 py-1 shadow-sm d-flex border",staticStyle:{background:"#d8d6d6"}},[e("div",{staticClass:"px-2 mt-1",staticStyle:{width:"100%","min-width":"300px"}},[t._v("\n              Email\n            ")]),t._v(" "),e("div",{staticClass:"px-2 mt-1",staticStyle:{"min-width":"180px"}},[t._v("\n              Last Online\n            ")])]),t._v(" "),0===t.data.length?e("div",{staticClass:"w-100 text-center py-4",staticStyle:{color:"#b4b4b4"}},[t._v("\n            "+t._s(t.$t("noRecordFound"))+"\n          ")]):t._e(),t._v(" "),t._l(t.data,(function(n,o){return e("div",{key:o,staticClass:"mx-0 w-100"},[e("div",{staticClass:"w-100 p-2 shadow-sm"},[e("div",{staticClass:"w-100 d-flex"},[e("div",{staticClass:"text-left px-2",staticStyle:{width:"100%","min-width":"300px"}},[t._v("\n                  "+t._s(n.email)+"\n                ")]),t._v(" "),e("div",{staticClass:"text-left px-2",staticStyle:{"min-width":"180px"}},[e("span",{staticClass:"small"},[t._v(t._s(t._f("moment")(n.updatedAt,"ddd ,MMM DD, YYYY - hh:mm")))])])])])])}))],2)],1)])],1)],1)])}),[],!1,null,"241b0e61",null);e.default=component.exports}}]);