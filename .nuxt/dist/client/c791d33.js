(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{448:function(t,e,r){var content=r(536);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(63).default)("60135784",content,!0,{sourceMap:!1})},535:function(t,e,r){"use strict";r(448)},536:function(t,e,r){var l=r(62)(!1);l.push([t.i,".adiv[data-v-190cf49c]{background:#04cb28;border-radius:15px;border-bottom-right-radius:0;border-bottom-left-radius:0;font-size:16px;height:46px}.chat[data-v-190cf49c]{border:none;background:#e2ffe8;font-size:16px;border-radius:20px}.bg-white[data-v-190cf49c]{border:1px solid #e7e7e9;font-size:16px;border-radius:20px}.myvideo img[data-v-190cf49c]{border-radius:20px}.dot[data-v-190cf49c]{font-weight:700}\n\n\n/*!* Darker chat container *!*/\n\n\n/*!* Clear floats *!*/\n\n\n/*!* Style images *!*/.right[data-v-190cf49c]{float:right;margin-left:20px;margin-right:0}.time-right[data-v-190cf49c]{float:right;color:#aaa}.time-left[data-v-190cf49c]{float:left;color:#999}.social-media .social-icon[data-v-190cf49c]{display:block;width:40px;height:40px;background:transparent;color:#fff;border:1px solid #fff;font-size:16px;margin-right:5px;border-radius:50%}.social-media .social-icon[data-v-190cf49c]:focus,.social-media .social-icon[data-v-190cf49c]:hover{background:#fff;color:var(--color2)}",""]),t.exports=l},601:function(t,e,r){"use strict";r.r(e);r(39),r(528);var l=r(30),o=r(136),n=r(74);l.c.add(n.i),l.c.add(o.b);var c={name:"Index",data:function(){return{value:"Some value",busy:!1,timeout:null,userId:0,msgTextBox:"",currentChatRoom:null,showChatMessagesOverlay:!1,messagesHtml:[],visibleMain:!0,visibleProgress:!1,intervalX:null,filter:null,filterOn:[],fields:[{key:"viewName",label:"Name",sortable:!0,thStyle:{width:"25%"}},{key:"text",label:"Message",sortable:!0,thStyle:{width:"50%"}},{key:"updatedAt",label:"Date",sortable:!0,thStyle:{width:"25%"}}],request_rows:[]}},mounted:function(){this.showRequests(),this.intervalX=setInterval(this.refreshTimer,2e4),this.userId=this.$auth.user.id},methods:{rowClass:function(t,e){if(t&&"row"===e){var r="";return t.unread>0&&(r="font-weight-bold font-italic w-100"),"mt-7 "+r}},showRequests:function(){var t=this;try{if(!this.visibleMain)return;this.visibleProgress=!0,this.$axios.post("request/getRequests",null).then((function(e){t.visibleProgress=!1,t.request_rows=e.data.data})).catch((function(e){t.visibleProgress=!1}))}catch(t){console.log(t),this.visibleProgress=!1}},onclick:function(t,e){var r=this;try{var l=this.$auth.user.id;l=l===t.receiverId?t.senderId:t.receiverId,this.visibleProgress=!1,this.showChatMessagesOverlay=!0;var o={sUid:l};this.currentChatRoom=t,this.$axios.post("request/getUserRequests",o).then((function(e){e.data.data.length>0&&(r.messagesHtml=e.data.data),r.visibleMain=!1,r.showChatMessagesOverlay=!1,r.$axios.post("/request/setview",o).then((function(e){t.viewed=1})).catch((function(t){}))})).catch((function(t){r.showChatMessagesOverlay=!1,r.visibleMain=!0}))}catch(t){this.showChatMessagesOverlay=!1}},sendMessage:function(){var t=this;try{if(0===this.msgTextBox.length)return;var e={receiverId:this.currentChatRoom.receiverId===this.userId?this.currentChatRoom.senderId:this.currentChatRoom.receiverId,text:this.msgTextBox,type:0,entityId:0},l={container:"#chatbox",easing:"ease-in",lazy:!1,offset:-60,force:!0,cancelable:!0,onStart:function(element){},onDone:function(element){},onCancel:function(){},x:!1,y:!0};this.$axios.post("/request/create",e).then((function(e){if(!0===e.data.ok){t.msgTextBox="",t.messagesHtml.push(e.data.data);var element="#msg_"+(e.data.data.id-1);r(175).scrollTo(element,100,l)}})).catch((function(t){console.log(t)}))}catch(t){}},chatMessages:function(){},cDate:function(t){return t.toLocaleString()},back:function(){this.visibleMain=!0,this.visibleProgress=!0},refreshTimer:function(){console.log("----hi------"),this.visibleMain&&this.showRequests()}},beforeDestroy:function(){console.log("----bye------"),clearInterval(this.intervalX)}},d=(r(535),r(73)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{fluid:""}},[t.visibleMain?r("div",[r("div",{staticStyle:{height:"15px"}},[t.visibleProgress?r("b-spinner",{attrs:{small:"",label:"Small Spinner",type:"grow"}}):t._e()],1),t._v(" "),r("b-row",[r("b-col",{staticClass:"my-1",attrs:{lg:"4"}},[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[r("b-input-group",{attrs:{size:"sm"}},[r("b-form-input",{attrs:{id:"filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),t._v(" "),r("b-input-group-append",[r("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),t._v(" "),r("b-col",{staticClass:"my-1",attrs:{lg:"4"}},[r("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter On",description:"Leave all unchecked to filter on all data","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.ariaDescribedby;return[r("b-form-checkbox-group",{staticClass:"mt-1",attrs:{"aria-describedby":l},model:{value:t.filterOn,callback:function(e){t.filterOn=e},expression:"filterOn"}},[r("b-form-checkbox",{attrs:{value:"viewName"}},[t._v("Name")]),t._v(" "),r("b-form-checkbox",{attrs:{value:"text"}},[t._v("Message")])],1)]}}],null,!1,3375923224)})],1)],1),t._v(" "),r("b-overlay",{attrs:{id:"overlay-background",show:t.showChatMessagesOverlay,variant:"white",opacity:.81,rounded:"sm"}},[r("b-table",{staticClass:"mt-3",attrs:{hover:"",fields:t.fields,filter:t.filter,items:t.request_rows,"filter-included-fields":t.filterOn,"show-empty":"","tbody-tr-class":t.rowClass},on:{"row-clicked":t.onclick},scopedSlots:t._u([{key:"cell(viewName)",fn:function(e){return[r("b-avatar",{attrs:{size:"3rem",src:null!=e.item.image_ru?"/"+e.item.image_ru:"",alt:"Cropped Image"}}),t._v(" "),r("span",[t._v(" "+t._s(e.item.viewName+" "+e.item.viewLname))])]}},{key:"cell(test)",fn:function(e){return[r("span",[t._v(t._s(e.item.text+" ")+" "),e.item.unread>0?r("b-badge",{attrs:{variant:"success"}},[t._v(t._s(e.item.unread))]):t._e()],1)]}},{key:"cell(updatedAt)",fn:function(e){return[r("i",[t._v(t._s(t.cDate(e.item.updatedAt)))])]}}],null,!1,933988337)})],1)],1):t._e(),t._v(" "),t.visibleMain?t._e():r("div",{staticClass:"w-100 h-100"},[r("b-button",{staticClass:"mt-2 mb-2",attrs:{variant:"light"},on:{click:t.back}},[r("svg",{staticClass:"bi bi-arrow-left-circle",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"}})])]),t._v(" "),r("div",{staticClass:"card",staticStyle:{"min-height":"400px"}},[r("div",{staticStyle:{"max-height":"400px","overflow-y":"auto"},attrs:{id:"chatbox"}},t._l(t.messagesHtml,(function(e){return r("div",[e.receiverId===t.userId&&0===e.type?r("div",{staticClass:"d-flex flex-row p-3 w-100",attrs:{id:"msg_"+e.id}},[r("b-avatar",{attrs:{size:"3rem",src:null!=t.currentChatRoom.image_ru?"/"+t.currentChatRoom.image_ru:"",alt:"Cropped Image"}}),t._v(" "),r("span",{staticClass:"chat ml-2 p-3",staticStyle:{"white-space":"pre"}},[t._v(" "+t._s(e.text)+"\n\n                    "),r("span",{staticClass:"time-right"},[t._v(t._s(null!=e.createdAt?e.createdAt:""))])])],1):t._e(),t._v(" "),e.receiverId!==t.userId&&0===e.type?r("div",{staticClass:"d-flex flex-row p-3 w-100 float-right",attrs:{id:"msg_"+e.id}},[r("div",{staticClass:"bg-white mr-2 p-3 w-100 text-right"},[r("span",{staticClass:"text-muted ",staticStyle:{"white-space":"pre"}},[t._v(" "+t._s(e.text)+" ")]),t._v(" "),r("span",{staticClass:"time-left"},[t._v(t._s(null!=e.createdAt?e.createdAt:"")+"\n                    "),0===e.viewed||null===e.viewed?r("svg",{staticClass:"bi bi-check",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"}})]):t._e(),t._v(" "),!0===e.viewed?r("svg",{staticClass:"bi bi-check-all",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{d:"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z"}})]):t._e()])]),t._v(" "),r("b-avatar",{staticClass:"right",attrs:{size:"3rem",src:null!=t.currentChatRoom.image_su?"/"+t.currentChatRoom.image_su:"",alt:"Cropped Image"}})],1):t._e(),t._v(" "),e.receiverId!==t.userId&&1===e.type?r("div",{staticClass:"d-flex flex-row p-3 w-100 float-right",attrs:{id:"msg_"+e.id}},[r("div",{staticClass:"bg-white mr-2 p-3 w-100 text-right"},[r("span",{staticClass:"text-muted ",staticStyle:{"white-space":"pre"}},[t._v(" "+t._s(e.text)+" ")]),t._v(" "),r("span",{staticClass:"time-left"},[t._v(t._s(null!=e.createdAt?e.createdAt:"")+"\n                    "),0===e.viewed||null===e.viewed?r("svg",{staticClass:"bi bi-check",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"}})]):t._e(),t._v(" "),!0===e.viewed?r("svg",{staticClass:"bi bi-check-all",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{d:"M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z"}})]):t._e()])]),t._v(" "),r("b-avatar",{staticClass:"right",attrs:{size:"3rem",src:null!=t.currentChatRoom.image_su?"/"+t.currentChatRoom.image_su:"",alt:"Cropped Image"}})],1):t._e()])})),0)]),t._v(" "),r("div",{staticClass:"p-3",staticStyle:{width:"100%"}},[r("b-overlay",{attrs:{show:t.busy,rounded:"lg",opacity:"0.6"},scopedSlots:t._u([{key:"overlay",fn:function(){return[r("div",{staticClass:"d-flex align-items-center"},[r("b-spinner",{attrs:{small:"",type:"grow",variant:"secondary"}}),t._v(" "),r("b-spinner",{attrs:{type:"grow",variant:"dark"}}),t._v(" "),r("b-spinner",{attrs:{small:"",type:"grow",variant:"secondary"}}),t._v(" "),r("span",{staticClass:"sr-only"},[t._v("Please wait...")])],1)]},proxy:!0}],null,!1,1445552771)},[t._v(" "),r("b-input-group",{attrs:{size:"lg"}},[r("b-form-textarea",{attrs:{id:"textarea",placeholder:"Enter Message...",rows:"3","max-rows":"6"},model:{value:t.msgTextBox,callback:function(e){t.msgTextBox=e},expression:"msgTextBox"}}),t._v(" "),r("b-input-group-append",[r("b-button",{directives:[{name:"scroll-to",rawName:"v-scroll-to",value:"#msg_8",expression:"'#msg_8'"}],ref:"button",attrs:{disabled:t.busy,variant:"primary"},on:{click:t.sendMessage}},[t._v("\n              Send\n            ")])],1)],1)],1)],1)],1)])}),[],!1,null,"190cf49c",null);e.default=component.exports}}]);